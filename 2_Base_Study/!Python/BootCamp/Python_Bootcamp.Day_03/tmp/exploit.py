from bs4 import BeautifulSoup
from pathlib import Path

with open(Path('..', 'materials', 'evilcorp.html'), 'r') as f:
    dom = BeautifulSoup(f.read(), 'html.parser')

with open(Path('..', 'materials', 'script.txt'), 'r') as f:
    script = f.read()

dom.head.title.string = "Evil Corp - Stealing your money every day"

name = dom.body.find_all('span', {'class': 'name'})[0]

h1 = dom.new_tag('h1')
h1.string = f"{name.text}, you are hacked!"
dom.body.insert(0, h1)

script_tag = dom.new_tag('script')
script_tag.string = script
dom.body.append(script_tag)

link = dom.body.find_all('a', href=True)[0]
link['href'] = 'https://mrrobot.fandom.com/wiki/Fsociety'
link.string = 'Fsociety'

with open(Path('..', 'materials', 'evilcorp_hacked.html'), 'w') as f:
    f.write(dom.prettify())



